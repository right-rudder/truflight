---
import { type CollectionEntry, getCollection } from "astro:content";
import BlogPost from "../../layouts/BlogPost.astro";
import { render } from "astro:content";
import Header from "../../components/Header.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import BlogPostingSchema from "../../components/schema/BlogPostingSchema.astro";
import ImageComp from "../../components/ImageComp.astro";
import { imagesList } from "../../assets/imagesLists/images";
import { headerImages } from "../../assets/imagesLists/headerImages";
import { ctaImages } from "../../assets/imagesLists/ctaImages";
import { pilotImages } from "../../assets/imagesLists/pilotImages";
import { randomImages } from "../../components/utils/randomImage";
import features from "../../data/features.js";
import FeatureCard from "../../components/FeatureCard.astro";

import { FaArrowRight } from "react-icons/fa6";
import Features from "../../components/Features.astro";
import { FaCheck } from "react-icons/fa";
import TrainingCoursesCarrousel from "../../components/TrainingCoursesCarrousel";
import ExternalLoadIcon from "../../assets/external-load.svg";
import PilotTrainingIcon from "../../assets/pilot-training.svg";
import DiscoveryFlightIcon from "../../assets/discovery-flight.svg";
import AirplaneIcon from "../../assets/airplane.svg";
import { TbStatusChange } from "react-icons/tb";
import { FaHelicopterSymbol } from "react-icons/fa6";

export async function getStaticPaths() {
  const location = await getCollection("flight-training");
  return location.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));
}
type Props = CollectionEntry<"flight-training">;
const post = Astro.props;
const { Content } = await render(post);
const {
  city,
  stateLong,
  stateShort,
  description,
  descriptions,
  distance,
  locationKeywords,
} = post.data;

const heroImage = randomImages(headerImages);
const firstCTAImage = randomImages(ctaImages);
const secondCTAImage = randomImages(ctaImages);
const thirdCTAImage = randomImages(ctaImages);
const pilotImage = randomImages(pilotImages);

// Get the raw content for schema
const content = post.body || "";

const headerData = {
  title: `Helicopter Flight Training Near ${city} - ${stateLong} `,
  subtitle: `Just a ${distance} drive`,
  primaryImage: heroImage,
};

// Prepare blog data for schema
// const blogData = {
//   title,
//   description,
//   content,
//   url: `https://www.truflightacademy.com/flight-training/${post.id}`,
//   datePublished: pubDate.toISOString(),
//   keywords: [
//     "helicopter training",
//     "flight school",
//     "aviation",
//     "Dallas Texas",
//     "pilot training",
//   ],
// };
---

<!-- <BlogPostingSchema blog={blogData} /> -->
<BaseLayout
  siteTitle={`Helicopter Flight Training Near ${city}, ${stateLong}
  | TruFlight Academy`}
  siteDescription={description}
>
  <Header slot="hero" data={headerData} />

  <section>
    <div
      class="mx-auto grid max-w-7xl place-content-center place-items-center gap-5 px-4 py-16 sm:grid-cols-3 sm:gap-10 lg:grid-cols-6 lg:px-12"
    >
      <a
        href="/pilot-training/private-pilot"
        class="group flex flex-col items-center gap-2 text-center"
      >
        <PilotTrainingIcon
          class="size-20 duration-100 group-hover:scale-110 group-hover:rotate-[35deg] sm:size-28"
        />
        <h3
          class="text-dark-blue font-display group-hover:text-primary-500 text-xl font-bold duration-100 group-hover:scale-125"
        >
          Pilot Training near {city}
        </h3>
      </a>
      <a
        href="/discovery-flight"
        class="group flex flex-col items-center gap-2 text-center"
      >
        <DiscoveryFlightIcon
          class="size-20 duration-100 group-hover:scale-110 group-hover:rotate-[35deg] sm:size-28"
        />
        <h3
          class="text-dark-blue font-display group-hover:text-primary-500 text-xl font-bold duration-100 group-hover:scale-125"
        >
          Discovery Flight
        </h3>
      </a>
      <a
        href="/add-on/private-helicopter-add-on"
        class="group flex flex-col items-center gap-2 text-center"
      >
        <AirplaneIcon
          class="size-20 duration-100 group-hover:scale-110 group-hover:rotate-[35deg] sm:size-28"
        />
        <h3
          class="text-dark-blue font-display group-hover:text-primary-500 text-xl font-bold duration-100 group-hover:scale-125"
        >
          Already a Pilot?
        </h3>
      </a>
      <a
        href="/pilot-training/external-load-training"
        class="group flex flex-col items-center gap-2 text-center"
      >
        <ExternalLoadIcon
          class="size-20 duration-100 group-hover:scale-110 group-hover:rotate-[35deg] sm:size-28"
        />
        <h3
          class="text-dark-blue font-display group-hover:text-primary-500 text-xl font-bold duration-100 group-hover:scale-125"
        >
          External Load Training
        </h3>
      </a>
      <a
        href="#weComeToYou"
        class="group flex flex-col items-center gap-2 text-center"
      >
        <TbStatusChange
          className="size-20 duration-100 group-hover:scale-110 group-hover:rotate-[35deg] sm:size-28"
        />
        <h3
          class="text-dark-blue font-display group-hover:text-primary-500 text-xl font-bold duration-100 group-hover:scale-125"
        >
          We Come To You
        </h3>
      </a>
      <a
        href="/book-now"
        class="group flex flex-col items-center gap-2 text-center"
      >
        <FaHelicopterSymbol
          className="size-20 duration-100 group-hover:scale-110 group-hover:rotate-[35deg] sm:size-28"
        />
        <h3
          class="text-dark-blue font-display group-hover:text-primary-500 text-xl font-bold duration-100 group-hover:scale-125"
        >
          Book Now
        </h3>
      </a>
    </div>
  </section>

  <section>
    <div class="mx-auto max-w-7xl px-4 py-24 lg:px-12">
      <div class="mb-10 flex flex-col gap-5">
        <strong class="text-medium-blue text-primary-500 text-lg font-bold"
          >Choose Training Program
        </strong>
        <h2 class="font-display text-3xl font-bold lg:text-5xl">
          Find the right program for you near {city}, {stateLong}
        </h2>
      </div>
      <TrainingCoursesCarrousel client:visible />
    </div>
  </section>

  <section id="weComeToYou" class="scroll-mt-20">
    <div
      class="mx-auto flex max-w-xl flex-col px-4 py-24 lg:max-w-7xl lg:flex-row lg:px-12"
    >
      <div class="flex-1">
        <ImageComp
          src={secondCTAImage.src}
          alt={secondCTAImage.alt}
          classes="lg:rounded-l-lg object-cover h-full w-full rounded-t-lg lg:rounded-tr-none"
        />
      </div>
      <div
        class="bg-dark-gray flex-1 rounded-b-lg text-white lg:rounded-r-lg lg:rounded-bl-none"
      >
        <div class="flex flex-col px-12 py-12 lg:py-20">
          <strong class="text-medium-blue text-primary-500 text-lg font-bold"
            >We Come To You
          </strong>
          <h2
            class="text-dark-blue font-display my-5 text-3xl leading-tight font-bold lg:text-4xl"
          >
            We Bring the Best Helicopter Flight Training to Your Location
          </h2>
          <p
            class="text-accent-100 text-sm font-medium tracking-wider lg:text-base/6"
          >
            You contact us and we fly out to you to give you your flight lesson.
            If lessons are at an airport where more than one student is flying
            with us that day, convenience fee can be split equally between
            students. Convenience fee is simply a there and back ferry flight
            cost. We are located just north of McKinney.
          </p>

          <div class="mt-5 flex flex-col gap-5 sm:flex-row">
            <a
              href="/contact-us"
              class="btn-secondary hover:border-primary-500! border-white! text-white!"
              >Contact Us
              <FaArrowRight />
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section>
    <div
      class="mx-auto flex max-w-xl flex-col-reverse items-center gap-10 px-4 py-24 lg:max-w-7xl lg:flex-row lg:gap-10 lg:px-12"
    >
      <div class="flex-1">
        <ImageComp
          src={firstCTAImage.src}
          alt={firstCTAImage.alt}
          classes="aspect-square rounded-md object-cover"
        />
      </div>
      <div class="flex flex-1 flex-col">
        <strong class="text-medium-blue text-primary-500 text-lg font-bold"
          >About Us</strong
        >
        <h2
          class="text-dark-blue font-display mb-5 text-5xl leading-tight font-bold"
        >
          Your Journey to Becoming a Helicopter Pilot near {city}, {stateLong}
        </h2>
        <p
          class="text-accent-400 max-w-lg text-sm font-medium tracking-wider lg:text-base/6"
        >
          At TruFlight Academy, we are dedicated to making your helicopter
          flight dreams a reality. As one of the leading <a
            href="/about/our-story"
            class="text-primary-500 font-semibold hover:underline"
            >helicopter flight schools in Dallas</a
          >, our state-of-the-art <a
            href="/about/our-fleet"
            class="text-primary-500 font-semibold hover:underline"
            >Cabri G2 aircraft</a
          > and our highly trained <a
            href="/about/our-chief-pilot"
            class="text-primary-500 font-semibold hover:underline"
            >certified flight instructors</a
          > provide you with the ability to obtain the certification you seek. Our
          commitment is to provide you with the in-depth knowledge, skills and confidence
          you need for success. Come train with us near {city}, {stateLong}. Is
          just {distance} drive. Or check if we can fly to get you!
        </p>

        <ul class="my-3 flex flex-col gap-2 font-bold">
          <li class="flex items-center gap-3">
            <FaCheck className="text-primary-500" />
            <div>
              Beginners looking to start their <a
                href="/pilot-training/private-pilot"
                class="text-primary-500 font-semibold hover:underline"
                >helicopter flight training</a
              >
            </div>
          </li>
          <li class="flex items-center gap-3">
            <FaCheck className="text-primary-500" />
            <div>
              Fixed-wing pilots near {city} - {stateLong}, seeking to <a
                href="/add-on/private-helicopter-add-on"
                class="text-primary-500 font-semibold hover:underline"
                >upgrade their skills to helicopters</a
              >
            </div>
          </li>
          <li class="flex items-center gap-3">
            <FaCheck className="text-primary-500" />
            <div>
              Experienced helicopter pilots near {city} - {stateLong}, aiming to <a
                href="/pilot-training/commercial-pilot"
                class="text-primary-500 font-semibold hover:underline"
                >enhance their skills</a
              >
            </div>
          </li>
          <li class="flex items-center gap-3">
            <FaCheck className="text-primary-500" />
            <div>
              Anyone interested in pursuing a <a
                href="/why-become-a-pilot"
                class="text-primary-500 font-semibold hover:underline"
                >career in aviation</a
              >
            </div>
          </li>
        </ul>

        <p
          class="text-accent-400 max-w-lg text-sm font-medium tracking-wider lg:text-base/6"
        >
          Join us at TruFlight Academy near {city}, {stateLong} and take the first
          step towards your dream of becoming a helicopter pilot! Is just {
            distance
          } drive.Or <a
            href="/contact-us"
            class="text-primary-500 font-semibold hover:underline">contact us</a
          > to see if we can fly to get you. Start with a <a
            href="/discovery-flight"
            class="text-primary-500 font-semibold hover:underline"
            >discovery flight</a
          > or explore our <a
            href="/pilot-training/private-pilot"
            class="text-primary-500 font-semibold hover:underline"
            >private pilot training</a
          >.
        </p>

        <div class="mt-5 flex flex-col items-center gap-5 sm:flex-row">
          <a href="/contact-us" class="btn-secondary"> Contact Us </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Elfsight Instagram Feed -->
  <section>
    <div class="mx-auto max-w-7xl px-4 py-24 lg:px-12">
      <script src="https://elfsightcdn.com/platform.js" async></script>
      <div
        class="elfsight-app-a9453111-37af-4b23-a537-951078d76aa6"
        data-elfsight-app-lazy
      >
      </div>
    </div>
  </section>

  <Features />

  <section class="bg-primary-50/50">
    <div
      class="mx-auto flex max-w-2xl flex-col items-center gap-10 px-4 py-24 lg:max-w-7xl lg:gap-10 lg:px-12"
    >
      <h2 class="mx-auto text-center">
        <strong class="text-medium-blue text-primary-500 text-lg font-bold"
          >Why Choose</strong
        >
        <br />
        <span
          class="text-dark-blue font-display mb-5 text-4xl leading-tight font-black italic lg:text-5xl"
          >TruFlight Academy</span
        >
      </h2>
      <h3>Just an {distance} drive from {city}, {stateLong}</h3>

      <div class="grid sm:grid-cols-2 lg:grid-cols-3">
        {features.map((feature) => <FeatureCard {...feature} />)}
      </div>
    </div>
  </section>

  <!-- Testing All images links -->
  <!-- {
    imagesList.map((imageTest) => (
      <ImageComp
        src={imageTest.src}
        alt={imageTest.alt}
        classes="lg:rounded-l-lg object-cover h-full w-full rounded-t-lg lg:rounded-tr-none"
      />
    ))
  } -->
</BaseLayout>
